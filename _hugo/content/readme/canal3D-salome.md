# canal3D-salome

- Geometría desde la misma herramienta:

  tank (.440 .325 .236)

  canal (1.339 .250 .08) -> translate (.44 .075 0.078<0.236/2-0.08/2>)

  chamberWall (.006 .225 .08) -> translate (1.693<1.699-0.006> 0.1<0.075-0.025> 0.078)

  chimney (R=0.0098 H=.316) -> rotate (-90 0 0) 90º reverse, axis X; translate (1.739<1.779-0.08/2> .325 .118<0.236/2>)

  diafragma (R=0.00625 H=0.002) -> rotate(-90 0 0); translate (1.739 .639<0.325+.316-.002> .118)

   Boolean operation: 

  - Cut (Main obj-> canal; Tool Obj-> chamb. wall)
  - Cut (Main obj-> chimney; Tool Obj-> diaf)
  - Fuse (Tank, cut1, cut2)


- Definición de contornos:

  Primero obtener las caras del modelo -> mediante la opción de `Explode`. 

  Después, crear los grupos de caras que conformarán cada contorno ->`Create new Group` (atmosphere, outflow, allwall). Se aconseja guardar en tras este paso.

- Generar el mallado:

  **Tetrahedral**

  `Create Mesh`:

  Mesh type: Netgen 1D-2D-3D.

  Algorithim: Netgen 3D Parameters -> Max=5; Min =2.

  Tetrahedrons: 1848014

  Export unv

  - 20-2 -> 39924
  - 10-2 -> 237880

  **Hexahedral**

  - [Body Fitting 3D meshing algorithm](http://docs.salome-platform.org/latest/gui/SMESH/cartesian_algo_page.html)
    - Minimal size of a cell truncated by the geometry boundary. If the size of a truncated grid cell is **Threshold** times less than a initial cell size, then a mesh element is not created.
    - **Implement Edges** check-box activates incorporation of geometrical edges in the mesh.
  - [Video Tutorial: Meshing With Body Fitting](https://www.youtube.com/watch?v=4xmSjjoioxI)
    - Mesh type: Hexahedral.
    - Algorithim: Body Fitting.
    - Hipotesis Construction: Body Fitting Parameters. x->f(t)=0.125; y->f(t)=0.125; z->f(t)=0.125 Treshold=1000 and active Orthogonal Axes.
    - Remove > Elements > Set Filter > Add: Geometry type, equal to polyhedra (poliedros en CFD se pueden usar).
    - Conver to/from quadratic.
  - [Body fitting mesh forum](http://www.salome-platform.org/forum/forum_10/142218492)
    - A mesh generated by Body Fitting also can be (if Threshold=1 or geometry is a box) structured. Depending on geometry being meshed and on used node spacing the mesh can be Cartesian. In a general case the mesh is **unstructured**.
  - [Convert to/from Quadratic Mesh](http://docs.salome-platform.org/latest/gui/SMESH/convert_to_from_quadratic_mesh_page.html)
    - If it is necessary to convert a linear mesh to quadratic or a quadratic mesh to linear. **Convert to bi-quadratic** creates some types of quadratic elements with additional central nodes: TRIA7, QUAD9 and HEXA27 elements instead of TRIA6, QUAD8, and HEXA20 elements respectively. 
    - If it is necessary to place **medium nodes** of the quadratic mesh **on the geometry** (meshed shape). This option is relevant for conversion to quadratic provided that the mesh is based on a geometry (not imported from file). 
  - [Does anyone know the different between linear and quadratic elements]https://www.researchgate.net/post/Does_anyone_know_the_different_between_linear_and_quadratic_elements_in_abaqus)
    - *The quad element refers to quadratic shape function and it means as when between 2 points this type of element has been used deformation along the edge follows a quadratic function(ax^2+Bx+c). On the other hand the linear shape function will result in a linear deformation(ax+b) along element. In case of large deformation the quad element has more accurate answer.*
  - [Salome body fitting for OpenFOAM case](https://www.cfd-online.com/Forums/openfoam-meshing/142435-salome-body-fitting-openfoam-case.html)
    - [Exporting a salome mesh to OpenFOAM](http://www.salome-platform.org/forum/forum_12/23863165#686106)
      - [python script that exports a mesh to OpenFOAM](https://github.com/nicolasedh/salomeToOpenFOAM)
    - [SketchUp Meshkit extension](http://extensions.sketchup.com/en/content/sketchy-tetgen-tools)
      - [Video Tutorial: Meshkit Tutorial - How to Mesh a Cylinder with SketchUp, MeshKit, and Gmsh](https://youtu.be/On3tg4kCchw)

  ​

salome container issue:

When I try to set up Netgen Parameters (hypotesis)

Salome Exception: libgfortran.so.3: cannot open shared object file: No such file or directory

Python console: Traceback (most recent call last): File "<input>", line 1, in <module> I0Error: [Errno 2] No such file or directory: 'salome'

In terminal:

th. 139728905844928 - Trace /volatile/home/salome/SALOME-8.3.0-CO7/SOURCES/SMESH/src/SMESHGUI/SMESHGUI_HypothesesUtils.cxx [529] : libgfortran.so.3: cannot open shared object file: No such file or directory

- Convert mesh to openFOAM

  ```
  ideasUnvToFoam filename.unv
  checkMesh
  transformPoints -scale '(0.001 0.001 0.001)'
  ```

  change manually constant/polyMesh/boundary: allwall patch -> wall